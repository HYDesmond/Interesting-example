<!DOCTYPE html>
<html>

	<head>
		<meta name="viewport" content="width=device-width,initial-scale=1,minimum-scale=1,maximum-scale=1,user-scalable=no" />
		<meta charset="utf-8" />
		<title>点餐</title>
		<link rel="stylesheet" type="text/css" href="css/swiper.min.css" />
		<link rel="stylesheet" type="text/css" href="css/index/index.css" />
		<!--标准mui.css-->
		<link rel="stylesheet" href="css/index/mui.css">
		<!--App自定义的css-->
		<link rel="stylesheet" type="text/css" href="css/index/app.css" />
		<link href="css/index/mui.picker.css" rel="stylesheet" />
		<link href="css/index/mui.poppicker.css" rel="stylesheet" />
	</head>

	<body>
		<div class="warp">
			<!--<div class="refurbish"></div>-->
			<div class="head">
				<!--头部-->
				<div id='showCityPicker3' class="region mui-btn mui-btn-block">
					<!--区域选择-->
					<span class="address"></span><img src="img/indexImg/down.png" class="address-btn" />
				</div>

				<div class="search">
					<!--搜索-->
					<a href="search.html">
						<div><img src="img/indexImg/magnifier.png" /><input type="text" id="" value="" placeholder="搜索食材、菜品" disabled="disabled" class="search_inp" /></div>
					</a>
				</div>

				<div class="news">
					<!--消息提醒-->
					<a href="">
						<img src="img/indexImg/news1.png" />
					</a>
				</div>

			</div>

			<div class="content">
				<div class="show swiper-container">
					<div class="swiper-wrapper">
						<div class="swiper-slide show1">
							<img src="img/indexImg/showImg1.png" class="showimg" />
							<p>吃三文鱼的正确姿势</p>
							<p><span>早餐来点啥？？</span></p>
						</div>
						<div class="swiper-slide show2">
							<img src="img/indexImg/showImg1.png" class="showimg" />
							<p>吃三文鱼的正确姿势</p>
							<p><span>早餐来点啥？？</span></p>
						</div>
						<div class="swiper-slide show3">
							<img src="img/indexImg/showImg1.png" class="showimg" />
							<p>吃三文鱼的正确姿势</p>
							<p><span>早餐来点啥？？</span></p>
						</div>
					</div>
					<!-- 如果需要分页器 -->
					<div class="swiper-pagination"></div>
				</div>
				<div class="toBuying">
					<p>兔抢购</p>
					<div class="buyVegetable1">
						<p>精选延庆生态胡萝卜600g</p>
						<p>
							<span class="hour">00</span> &#58;
							<span class="minute">00</span> &#58;
							<span class="second">00</span>
							<span class="price">&yen;4.20</span>
						</p>
						<img src="img/indexImg/buyVegetable1.png" />
					</div>
					<div class="buyVegetable2">
						<p>精选延庆生态黄瓜500g</p>
						<p>
							<span class="hour">00</span> &#58;
							<span class="minute">00</span> &#58;
							<span class="second">00</span>
							<span class="price">&yen;9.90</span>
						</p>
						<img src="img/indexImg/buyVegetable2.png" />
					</div>
				</div>

				<div class="choice">
					<p>菜品精选</p>
					<div>
						<div class="choiceTxt1">
							<p>麻辣牛排</p>
							<p>&yen;35</p>
						</div>
						<img src="img/indexImg/choiceImg1.png" />
					</div>
					<div>
						<div class="choiceTxt2">
							<p>麻辣牛排</p>
							<p>&yen;35</p>
						</div>
						<img src="img/indexImg/choiceImg2.png" />
					</div>
					<div>
						<div class="choiceTxt3">
							<p>麻辣牛排</p>
							<p>&yen;35</p>
						</div>
						<img src="img/indexImg/choiceImg3.png" />
					</div>
					<div>
						<div class="choiceTxt4">
							<p>麻辣牛排</p>
							<p>&yen;35</p>
						</div>
						<img src="img/indexImg/choiceImg4.png" />
					</div>
					<div>
						<div class="choiceTxt5">
							<p>麻辣牛排</p>
							<p>&yen;35</p>
						</div>
						<img src="img/indexImg/choiceImg5.png" />
					</div>
				</div>
			</div>
			<div class="shop_car"><a href="shopCart.html"><img src="img/indexImg/shop_car.png" /></a></div>
			<div class="foot">
				<ul>
					<li>
						<a href="index.html"><img src="img/indexImg/homelogo.png" />主页</a>
					</li>
					<li>
						<a href="mall.html"><img src="img/indexImg/malllogo.png" />商城</a>
					</li>
					<li>
						<a href="select.html"><img src="img/indexImg/selectlogo2.png" />选菜</a>
					</li>
					<li>
						<a href="friend_share.html"><img src="img/indexImg/foundlogo.png" />发现</a>
					</li>
					<li>
						<a href="mynews.html"><img src="img/indexImg/mylogo.png" />我的</a>
					</li>
				</ul>
			</div>
		</div>
		<script src="js/jquery-1.11.0.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/index/mui.min.js"></script>
		<!--<script src="../js/mui.picker.min.js"></script>-->
		<script src="js/index/mui.picker.js"></script>
		<script src="js/index/mui.poppicker.js"></script>
		<script src="js/index/city.data.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/index/city.data-3.js" type="text/javascript" charset="utf-8"></script>
		<script src="js/swiper-3.3.1.min.js"></script>
		<script type="text/javascript">
		
		
			var div = document.getElementsByTagName('div')[0];
			var getTimes = setInterval(function() {
				var time = new Date(); //创建时间对象
				var times = new Date(2016, 12, 14, 18, 0, 0, 0);
				var sc = times.getTime() - time.getTime();
				var h = parseInt(sc % (24 * 60 * 60 * 1000) / (60 * 60 * 1000));
				var m = parseInt(sc % (60 * 60 * 1000) / (60 * 1000));
				var s = parseInt(sc % (60 * 1000) / (1000));
				
				var hour=document.getElementsByClassName("hour");
				var minute=document.getElementsByClassName("minute");
				var second=document.getElementsByClassName("second");
				
				if(sc >= 0) {
					hour[0].innerText=h;
					minute[0].innerText=m;
					second[0].innerText=s;
					
					if(hour[0].innerText.length<2){
						hour[0].innerText="0"+hour[0].innerText;
					}
					if(minute[0].innerText.length<2){
						minute[0].innerText="0"+minute[0].innerText;
					}
					if(second[0].innerText.length<2){
						second[0].innerText="0"+second[0].innerText;
					}
				} else {
					hour[0].innerText=0;
					minute[0].innerText=0;
					second[0].innerText=0;
				}
				
				var time2 = new Date(); //创建时间对象
				var times2 = new Date(2016, 12, 1, 18, 0, 0, 0);
				var sc2 = times2.getTime() - time2.getTime();
				var h2 = parseInt(sc2 % (24 * 60 * 60 * 1000) / (60 * 60 * 1000));
				var m2 = parseInt(sc2 % (60 * 60 * 1000) / (60 * 1000));
				var s2 = parseInt(sc2 % (60 * 1000) / (1000));
				if(sc2 >= 0){
					hour[1].innerText=h2;
					minute[1].innerText=m2;
					second[1].innerText=s2;
					
					if(hour[1].innerText.length<2){
						hour[1].innerText="0"+hour[1].innerText;
					}
					if(minute[1].innerText.length<2){
						minute[1].innerText="0"+minute[1].innerText;
					}
					if(second[1].innerText.length<2){
						second[1].innerText="0"+second[1].innerText;
					}
					
				}else{
					hour[1].innerText=0;
					minute[1].innerText=0;
					second[1].innerText=0;
				}
			}, 1000);
			
			
			//地址
			var address = document.getElementsByClassName("address")[0];
			var show = document.getElementsByClassName("showimg");
			console.log(address.innerText.length);

			$.ajax({
				type: "post",
				url: "php/index_mall.php",
				dataType: "json",
				data: {},
				success: function(data) {
					for(var i = 0; i < 3; i++) {
						show[i].src = data[0].url;
					}
				},
				async: true
			});
			var mySwiper = new Swiper('.swiper-container', {
				direction: 'horizontal',
				autoplay: 2000,
				loop: true,
				autoplayDisableOnInteraction: false,

				// 如果需要分页器                  
				pagination: '.swiper-pagination',
			})

			function resize() {
				var content = document.getElementsByClassName("content")[0];
				var content_height = content.offsetTop + content.offsetHeight;
				content.style.height = content_height + "px";
				console.log(content.style.height);
			}
			resize();

			(function($, doc) {
				$.init();
				$.ready(function() {
					//普通示例
					var userPicker = new $.PopPicker();
					//-----------------------------------------
					//					//级联示例
					var cityPicker3 = new $.PopPicker({
						layer: 3
					});
					cityPicker3.setData(cityData3);
					var showCityPickerButton = doc.getElementById('showCityPicker3');
					var showCityPicker3 = doc.getElementById('showCityPicker3');

					var address_btn = document.getElementsByClassName("address-btn")[0];
					var showCityPicker3_height = showCityPicker3.clientHeight;
					var address_fontSize;
					showCityPickerButton.addEventListener('tap', function(event) {
						cityPicker3.show(function(items) {
							showCityPicker3.innerHTML = '<span class="address">' + (items[1] || {}).text + '</span><img src="img/indexImg/down.png" class="address-btn" />';
							//返回 false 可以阻止选择框的关闭
							//return false;

						});

					}, false);
				});
			})(mui, document);

			//---------------------------------------------------
			//购物车图标拖拽
			var shop_car = document.getElementsByClassName("shop_car")[0];
			shop_car.addEventListener('touchstart', function(event) {
				//				console.log(event.touches);
				//				console.log(event.touches.length);
				//				console.log(event.touches[0].clientX);
				//				console.log(event.touches[0].clientY);
				var event = event || window.event;
				var staX = event.touches[0].clientX - shop_car.offsetLeft;
				var staY = event.touches[0].clientY - shop_car.offsetTop;
				shop_car.addEventListener('touchmove', function(event) {
					var event = event || window.event;
					var X = event.touches[0].clientX - staX;
					var Y = event.touches[0].clientY - staY;
					if(Y < 55) {
						Y = 55;
					} else if(Y > document.documentElement.clientHeight - shop_car.offsetHeight - 55) {
						Y = document.documentElement.clientHeight - shop_car.offsetHeight - 55;
					}

					if(X < 0) {
						X = 0;
					} else if(X > document.documentElement.clientWidth - shop_car.offsetWidth) {
						X = document.documentElement.clientWidth - shop_car.offsetWidth;
					}
					shop_car.style.left = X + 'px';
					shop_car.style.top = Y + 'px';

					//清除默认事件
					event.preventDefault();
					return false;
				}, false);
				document.addEventListener('touchend', function() {
					document.ontouchmove = null;
				}, false);
			}, false);

			var choice = document.getElementsByClassName("choice")[0];
			var foot = document.getElementsByClassName("foot")[0];
			choice.style.height = choice.offsetHeight + foot.offsetHeight + "px";
		</script>
	</body>

</html>
